<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Syntax - Tokay programming language</title>


        <!-- Custom HTML head -->

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="00-preface.html"><strong aria-hidden="true">1.</strong> Preface</a></li><li class="chapter-item expanded "><a href="01-syntax.html" class="active"><strong aria-hidden="true">2.</strong> Syntax</a></li><li class="chapter-item expanded "><a href="02-values.html"><strong aria-hidden="true">3.</strong> Values</a></li><li class="chapter-item expanded "><a href="03-tokens.html"><strong aria-hidden="true">4.</strong> Tokens</a></li><li class="chapter-item expanded "><a href="04-parselets.html"><strong aria-hidden="true">5.</strong> Parselets</a></li><li class="chapter-item expanded "><a href="05-control-structures.html"><strong aria-hidden="true">6.</strong> Control structrues</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Tokay programming language</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="syntax"><a class="header" href="#syntax">Syntax</a></h1>
<p>Let's start with some explanations about Tokays syntax and fundamental building blocks first.</p>
<h2 id="comments"><a class="header" href="#comments">Comments</a></h2>
<p>Tokay currently only supports line-comments, starting with a hash (<code>#</code>). The rest of the line will be ignored.</p>
<pre><code class="language-tokay"># This is a comment
hash = &quot;# this is a string&quot;  # this is also a comment.
</code></pre>
<h2 id="reserved-words"><a class="header" href="#reserved-words">Reserved words</a></h2>
<p>In Tokay, the following keywords are reserved words for control structures, values and special operators.</p>
<pre><code class="language-tokay">accept begin else end exit expect false for
if in loop next not null peek push reject
repeat return true void
</code></pre>
<h2 id="identifiers"><a class="header" href="#identifiers">Identifiers</a></h2>
<p>Naming rules for identifiers in Tokay differ to other programming languages, and this is an essential feature.</p>
<ol>
<li>As known from other languages, identifiers may not start with any digit (<code>0-9</code>).</li>
<li>Variables need to start with a lower-case letter from (<code>a-z</code>)</li>
<li>Constants need to start either
<ul>
<li>with an upper-case letter (<code>A-Z</code>) or an underscore (<code>_</code>) when they refer consumable values,</li>
<li>otherwise they can also start with a lower-case letter from (<code>a-z</code>).</li>
</ul>
</li>
</ol>
<p>Some examples for better understanding:</p>
<pre><code class="language-tokay"># Valid
pi : 3.1415
mul2 : @x { x * 2 }
Planet : @{ 'Venus' ; 'Earth'; 'Mars' }
the_Tribe = &quot;Apache&quot;

# Invalid
Pi : 3.1415  # float value is not consumable
planet : @{ 'Venus' ; 'Earth'; 'Mars' }  # identifier must specify consumable
The_Tribe = &quot;Cherokee&quot;  # Upper-case variable name not allowed

9th = 9  # interpreted as '9 th = 9'
</code></pre>
<p>More about <em>consumable</em> and <em>non-consumable</em> values, <em>variables</em> and <em>constants</em> will be discussed later.</p>
<h2 id="sequences"><a class="header" href="#sequences">Sequences</a></h2>
<p>Sequences are a fundamental and powerful feature of Tokay, as you will see later. We will only discuss their syntax and simple examples here for now.</p>
<p>Every single value, call, expression, control-flow statement or even block is considered as an item. We will discuss blocks shortly.
Those items can be chained to a sequence directly in every line of a Tokay program.</p>
<pre><code class="language-tokay">1 2 3 + 4    # results in a list (1, 2, 7)
</code></pre>
<p>For better readability, items of a sequence can also be optionally separated by commas (<code>,</code>), so</p>
<pre><code class="language-tokay">1, 2, 3 + 4  # (1, 2, 7)
</code></pre>
<p>encodes the same.</p>
<p>All items of a sequence with a given severity are used to determine the result of the sequence. Therefore, these sequences return <code>(1, 2, 7)</code> in the above examples when entered in a Tokay REPL. Severities and automatic value construction of sequences will be discussed later on.</p>
<p>The items of a sequence are captured, so they can be accessed inside of the sequence using <em>capture variables</em>. In the next example, the first capture, which holds the result <code>7</code> from the expression <code>3 + 4</code> is referenced with <code>$1</code> and used in the second item as value of the expression. Referencing a capture which is out of bounds will just return a <code>void</code> value.</p>
<pre><code class="language-tokay">3 + 4, $1 * 2  # (7, 14)
</code></pre>
<p>Captures can also be re-assigned by following captures. This one assigns a value at the second item to the first item, and uses the first item inside of the calculation. The second item which is the assignment, exists also as item of the sequence and refers to <code>void</code>, as all assignments do. This is the reason why Tokay has two values to simply define nothing, which are <code>void</code> and <code>null</code>.</p>
<pre><code class="language-tokay">3 + 4, $1 = $1 * 2  # 14
</code></pre>
<p>As the result of the above sequence, just one value results which is <code>14</code>, but the second item's value, <code>void</code>, has a lower severity than the calculated and assigned first value. This is the magic with sequences that you will soon figure out in detail, especially when tokens from streams are accessed and processed, or your programs work on extracted information from the input, and the automatic abstract syntax tree construction occurs.</p>
<p>As the last example, we shortly show how sequence items can also be named and accessed by a more meaningful name than just the index.</p>
<pre><code class="language-tokay">hello =&gt; &quot;Hello&quot;, $hello = 3 * $hello  # (hello =&gt; &quot;HelloHelloHello&quot;)
</code></pre>
<p>Here, the first item, which is referenced by the capture variable <code>$hello</code> is repeated 3 times as the second item.
It might be quite annoying, but the result of this sequence is a dict as shown in the comment. A dict is a hash-table where values can be referenced by a key.</p>
<h2 id="newlines"><a class="header" href="#newlines">Newlines</a></h2>
<p>In Tokay, newlines (line-breaks, <code>\n</code> respectively) are meaningful. They separate sequences from each other, as you will learn in the next section.</p>
<pre><code class="language-tokay">&quot;1st&quot; &quot;sequence&quot;
&quot;2nd&quot; &quot;sequence&quot;
&quot;3rd&quot; &quot;sequence&quot;
</code></pre>
<p>Instead of a newline, a semicolon (<code>;</code>) can also be used, which has the same meaning. A single-line sequence can be split into multiple lines by preceding a backslash (<code>\</code>) in front of the line-break.</p>
<pre><code class="language-tokay">&quot;1st&quot; \
    &quot;sequence&quot;
&quot;2nd&quot; &quot;sequence&quot; ; &quot;3rd&quot; &quot;sequence&quot;
</code></pre>
<p>The first and second example are literally the same.</p>
<h2 id="blocks"><a class="header" href="#blocks">Blocks</a></h2>
<p>Sequences are organized in blocks. Blocks may contain several sequences, which are executed in order of their definition. Every sequence inside of a block is separated by a newline.</p>
<ul>
<li><strong>Blocks</strong> are defined by curly braces <code>{...}</code> and introduce a new alternation of sequences. Sequences in a block are executed in order until an item of a sequence or the sequence itself <em>accepts</em> or <em>rejects</em> the block.</li>
<li><strong>Sequences</strong> are lines in a block, delimited by either the end of the line, a semicolon <code>;</code> or the blocks closing brace <code>}</code>. They are made of items.</li>
<li><strong>Items</strong> are
<ul>
<li>expressions like <code>1 + 2</code> or <code>++i * 3</code></li>
<li>assignments like <code>x = 42</code> or <code>s += &quot;duh&quot;</code></li>
<li>calls to <code>'tokens'</code>, <code>functions()</code> or <code>Parselets</code></li>
<li>control flow instructions like <code>if x == 42 &quot;yes&quot; else &quot;no&quot;</code></li>
<li>and even further <code>{ blocks }</code></li>
</ul>
</li>
</ul>
<pre><code class="language-tokay">{  # a block...
    # ... has sequences
    itemÂ¹ itemÂ² itemÂ³ ... # made of items.

    itemÂ¹ {  # an item of a sequence can be a block again
        itemÂ¹ itemÂ² ... # which contains further sequences with items
    }

    {}  # this empty block is the only item of the third sequence of the outer block
}
</code></pre>
<p>Blocks implicitly return the value of the last sequence being executed. Thus,</p>
<pre><code class="language-tokay">a = {
    1 + 2
    4
}
</code></pre>
<p>assigns <code>4</code> to <code>a</code>, but calculates <code>3</code> in between.</p>
<h2 id="functions"><a class="header" href="#functions">Functions</a></h2>
<p>A function is introduced by an at-character (<code>@</code>), where a parameter list might optionally follow. The function's body is obgligatory, but can also exist of just a sequence or an item. Functions are normally assigned to constants, but can also be assigned to variables, with some loose of flexibility, but opening other features.</p>
<pre><code class="language-tokay"># f is a function
f : @x = 1 {
    print(&quot;I am a function, x is &quot; + x)
}

f        # calls f, because it has no required parameters!
f()      # same as just f
f(5)     # calls f with x=5
f(x=10)  # calls f with x=10
</code></pre>
<p>Tokay functions that consume input are called <em>parselets</em>. It depends on the function's body if its either considered to be a function or a parselet. Generally, when talking about parselets in Tokay, both function and real parselets are meant as shorthand.</p>
<pre><code class="language-tokay"># P is a parselet, as it uses a consuming token
P : @x = 1 {
    Word print(&quot;I am a parselet, x is &quot; + x)
}

P        # calls P, because it has no required parameters!
P()      # same as just P
P(5)     # calls P with x=5
P(x=10)  # calls P with x=10
</code></pre>
<h2 id="operators"><a class="header" href="#operators">Operators</a></h2>
<p>Tokay implements the following operators for use in expressions. The operators are ordered by precedence, operators in the same row share the same precedence.</p>
<table>
    <thead>
        <tr class="title">
            <th>
                Operator
            </th>
            <th>
                Description
            </th>
            <th>
                Associativity
            </th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>= += -= *= /=</td>
            <td>Assignment, combined operation-assignment</td>
            <td>left</td>
        </tr>
        <tr>
            <td>||</td>
            <td>Logical or</td>
            <td>left</td>
        </tr>
        <tr>
            <td>&&</td>
            <td>Logical and</td>
            <td>left</td>
        </tr>
        <tr>
            <td>== != < <= >= ></td>
            <td>Equal, unequal, Comparison</td>
            <td>left</td>
        </tr>
        <tr>
            <td>+ -</td>
            <td>Add, subtract</td>
            <td>left</td>
        </tr>
        <tr>
            <td>* /</td>
            <td>Multiply, divide</td>
            <td>left</td>
        </tr>
        <tr>
            <td>- !</td>
            <td>Negate, not</td>
            <td>right</td>
        </tr>
        <tr>
            <td>++ --</td>
            <td>Increment, decrement</td>
            <td>right</td>
        </tr>
        <tr>
            <td>() [] .</td>
            <td>Grouping, subscript, attribute</td>
            <td>left</td>
        </tr>
    </tbody>
</table>
<p>Operators produce different results depending on the data-types of their operands. For example, <code>3 * 10</code> multiplies, where <code>3 * &quot;test&quot;</code> creates a new string repeating &quot;test&quot; 3 times. Try out the results of different operands in a Tokay REPL for clarification.</p>
<p>Some operators might be separated by whitespace or grouping for clarification. For example, the plus-operator (<code>+</code>) also has a different meaning when used on consumables, which is discussed next.</p>
<h2 id="modifiers"><a class="header" href="#modifiers">Modifiers</a></h2>
<p>Tokay allows to use the following modifiers for calls to tokens and parselets. Modifiers are used to describe repetitions or optional occurences of tokens.</p>
<table>
    <thead>
        <tr class="title">
            <th>
                Modifier
            </th>
            <th>
                Description
            </th>
            <th>
                Examples
            </th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>+</td>
            <td>Positive repetition (one or many)</td>
            <td>'t'+, P(n=3)+</td>
        </tr>
        <tr>
            <td>?</td>
            <td>Optional (one or none)</td>
            <td>'t'?, P(n=3)?</td>
        </tr>
        <tr>
            <td>*</td>
            <td>Kleene star (none or many)</td>
            <td>'t'*, P(n=3)*</td>
        </tr>
    </tbody>
</table>
<p>You might have recognized that the operators <code>+</code> and <code>*</code> are used as operators for add and multiply as well. To clarify meaning, all modifiers stick to the token they belong to, and no whitespace is accepted between them. Modifiers are only allowed on tokens and parselet calls, and nowhere else (as it is not useful).</p>
<p>Here are some examples for clarification:</p>
<pre><code class="language-tokay">'t' * 3    # match 't' and repeat the result 3 times
't'* * 3   # match 't' one or multiple times and repeat the result 3 times
't' * * 3  # syntax error
</code></pre>
<h2 id="escape-sequences"><a class="header" href="#escape-sequences">Escape sequences</a></h2>
<p>Escape sequences can be used inside strings, match/touch tokens and character-classes to encode any unicode character. They are introduced with a backslash. Escape-sequences should be used to simplify the source code and its readability, but any unicode character can also be directly expressed.</p>
<table>
    <thead>
        <tr class="title">
            <th>
                Sequence
            </th>
            <th>
                Description
            </th>
            <th>
                Examples
            </th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>\a \b \f \n \r \t \v</td>
            <td>Bell (alert), backspace, formfeed, new line, carriage return, horizontal tab, vertical tab, </td>
            <td>"\a\b\f\n\r\t\v"</td>
        </tr>
        <tr>
            <td>\' \" \\</td>
            <td>Quotation marks, backslash</td>
            <td>"\'\"\\"  # '"\</td>
        </tr>
        <tr>
            <td>\ooo</td>
            <td>ASCII character in octal notation</td>
            <td>"\100"  # @</td>
        </tr>
        <tr>
            <td>\xhh</td>
            <td>ASCII character in hexadecimal notation</td>
            <td>"\xCA"  # ÃŠ</td>
        </tr>
        <tr>
            <td>\uhhhh</td>
            <td>16-Bit Unicode character in hexadecimal notation</td>
            <td>"\u20ac"  # â‚¬</td>
        </tr>
        <tr>
            <td>\Uhhhhhhhh</td>
            <td>32-Bit Unicode character in hexadecimal notation</td>
            <td>"\U0001F98E"  # ðŸ¦Ž</td>
        </tr>
    </tbody>
</table>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="00-preface.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="02-values.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="00-preface.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="02-values.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script type="text/javascript">
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->


    </body>
</html>
