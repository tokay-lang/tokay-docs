<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Sequences - Tokay programming language</title>


        <!-- Custom HTML head -->

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../preface.html"><strong aria-hidden="true">1.</strong> Preface</a></li><li class="chapter-item expanded "><a href="../getting-started.html"><strong aria-hidden="true">2.</strong> Getting started</a></li><li class="chapter-item expanded "><a href="../basics/index.html"><strong aria-hidden="true">3.</strong> Basics</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../basics/items.html"><strong aria-hidden="true">3.1.</strong> Items</a></li><li class="chapter-item expanded "><a href="../basics/sequences.html" class="active"><strong aria-hidden="true">3.2.</strong> Sequences</a></li><li class="chapter-item expanded "><a href="../basics/blocks.html"><strong aria-hidden="true">3.3.</strong> Blocks</a></li></ol></li><li class="chapter-item expanded "><a href="../concepts/index.html"><strong aria-hidden="true">4.</strong> Concepts</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../concepts/terminology.html"><strong aria-hidden="true">4.1.</strong> Terminology</a></li><li class="chapter-item expanded "><a href="../concepts/values.html"><strong aria-hidden="true">4.2.</strong> Values</a></li><li class="chapter-item expanded "><a href="../concepts/objects.html"><strong aria-hidden="true">4.3.</strong> Objects</a></li><li class="chapter-item expanded "><a href="../concepts/tokens.html"><strong aria-hidden="true">4.4.</strong> Tokens</a></li><li class="chapter-item expanded "><a href="../concepts/parselets.html"><strong aria-hidden="true">4.5.</strong> Parselets</a></li></ol></li><li class="chapter-item expanded "><a href="../control-structures.html"><strong aria-hidden="true">5.</strong> Control structures</a></li><li class="chapter-item expanded "><a href="../appendix/index.html"><strong aria-hidden="true">6.</strong> Appendix</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../appendix/keywords.html"><strong aria-hidden="true">6.1.</strong> A - Keywords</a></li><li class="chapter-item expanded "><a href="../appendix/operators.html"><strong aria-hidden="true">6.2.</strong> B - Operators</a></li><li class="chapter-item expanded "><a href="../appendix/modifiers.html"><strong aria-hidden="true">6.3.</strong> C - Modifiers</a></li><li class="chapter-item expanded "><a href="../appendix/builtins.html"><strong aria-hidden="true">6.4.</strong> D - Builtins</a></li><li class="chapter-item expanded "><a href="../appendix/escape-sequences.html"><strong aria-hidden="true">6.5.</strong> E - Escape sequences</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Tokay programming language</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="sequences"><a class="header" href="#sequences">Sequences</a></h1>
<p>Sequences are occurences of items in a row.</p>
<p>Here is a sequence of three items:</p>
<pre><code class="language-tokay">1 2 3 + 4    # results in a list (1, 2, 7)
</code></pre>
<p>For better readability, items of a sequence can be optionally separated by commas (<code>,</code>), so</p>
<pre><code class="language-tokay">1, 2, 3 + 4  # (1, 2, 7)
</code></pre>
<p>encodes the same.</p>
<p>All items of a sequence with a given severity are used to determine the result of the sequence. Therefore, these sequences return <code>(1, 2, 7)</code> in the above examples when entered in a Tokay REPL. This has to deal with the <a href="items.html#severities">severities</a> the items own.</p>
<h2 id="captures"><a class="header" href="#captures">Captures</a></h2>
<p>The items of a sequence are captured, so they can be accessed inside of the sequence using <em>capture variables</em>.</p>
<p>In the next example, the first capture, which holds the result <code>7</code> from the expression <code>3 + 4</code> is referenced with <code>$1</code> and used in the second item as value of the expression. Referencing a capture which is out of bounds will just return <code>void</code>.</p>
<pre><code class="language-tokay">3 + 4, $1 * 2  # (7, 14)
</code></pre>
<p>Captures can also be re-assigned by subsequent items. The next one assigns a value at the second item to the first item, and uses the first item inside of the calculation. The second item which is the assignment, exists also as item of the sequence and refers to <code>void</code>, as all assignments do.</p>
<blockquote>
<p>This is the reason why Tokay has two values to simply define nothing, which are <code>void</code> and <code>null</code>, but null has a higher severity.</p>
</blockquote>
<pre><code class="language-tokay">3 + 4, $1 = $1 * 2  # 14
</code></pre>
<p>As the result of the above sequence, just one value results which is <code>14</code>, but the second item's value, <code>void</code>, has a lower severity than the calculated and assigned first value. This is the magic with sequences that you will soon figure out in detail, especially when tokens from streams are accessed and processed, or your programs work on extracted information from the input, and the automatic abstract syntax tree construction occurs.</p>
<p>As the last example, we shortly show how sequence items can also be named and accessed by a more meaningful name than just the index.</p>
<pre><code class="language-tokay">hello =&gt; &quot;Hello&quot;, $hello = 3 * $hello  # (hello =&gt; &quot;HelloHelloHello&quot;)
</code></pre>
<p>Here, the first item, which is referenced by the capture variable <code>$hello</code> is repeated 3 times as the second item.</p>
<p>It might be quite annoying, but the result of this sequence is a <em>dict</em> as shown in the comment. A dict is a hash-table where values can be referenced by a key.</p>
<blockquote>
<p>If you come from Python, you might already know about <em>list</em> and <em>dict</em> objects. Their behavior and meaning is similar in Tokay.</p>
</blockquote>
<h2 id="parsing-input-sequences"><a class="header" href="#parsing-input-sequences">Parsing input sequences</a></h2>
<p>As Tokay is a programming language with built-in parsing capabilities, let's see how parsing integrates to sequences and captures.</p>
<p>Given the sequence</p>
<pre><code class="language-tokay">Word __ ''the'' __ Word
</code></pre>
<p>we make use of the built-in token <code>Word</code> which matches anything made of characters and digits, and the special constant <code>__</code>, which matches arbitrary whitespace, but at least one whitespace character must be present. Whitespace is anything represented by non-printable characters, like spaces or tabs.</p>
<p>We can now run this sequence on any input existing of three words, where the word in the middle is &quot;the&quot;. Let's say</p>
<pre><code>Save the planet
</code></pre>
<p>and we get the output</p>
<pre><code>(&quot;Save&quot;, &quot;the&quot;, &quot;planet&quot;)
</code></pre>
<blockquote>
<p>To try it out, either start a Tokay REPL with <code>$ tokay -- &quot;Save the planet&quot;</code> and enter the sequence <code>Word __ ''the'' __ Word</code> afterwards, or directly specify both at invocation, like<br>
<code>$ tokay &quot;Word __ ''the'' __ Word&quot; -- &quot;Save the planet&quot;</code>.</p>
</blockquote>
<p>You will see, it's regardless of how many whitespace you insert, the result will always be the same.</p>
<h3 id="using-alias-variables"><a class="header" href="#using-alias-variables">Using alias variables</a></h3>
<p>Alias variables can also be used perfectly for parsing, to give items meaningful names and make them independent from their position.</p>
<pre><code class="language-tokay">predicate =&gt; Word __ 'the' __ object =&gt; Word
</code></pre>
<p>will output</p>
<pre><code>(object =&gt; &quot;planet&quot;, predicate =&gt; &quot;Save&quot;)
</code></pre>
<blockquote>
<p>In this case, &quot;the&quot; was degrated to a touch, to make the output more clear.</p>
</blockquote>
<h3 id="the-special-capture-0"><a class="header" href="#the-special-capture-0">The special capture $0</a></h3>
<p>There is also a special capture variable called $0. It contains the input captured by the currently executed parselet the sequence belongs to, but it can also be assigned to any other value.</p>
<p>Let's see how all capture variables, including $0, are growing when the items from the examples above are being executed.</p>
<table>
    <tr>
        <td>
            <strong>Capture</strong>
        </td>
        <td>
            $1
        </td>
        <td>
            $2
        </td>
        <td>
            $3
        </td>
        <td>
            $4
        </td>
        <td>
            $5
        </td>
    </tr>
    <tr>
        <td>
            <strong>Alias</strong>
        </td>
        <td>
            $predicate
        </td>
        <td></td>
        <td></td>
        <td></td>
        <td>
            $object
        </td>
    </tr>
    <tr>
        <td>
            <strong>Item</strong>
        </td>
        <td>
            <code>predicate => Word</code>
        </td>
        <td>
            <code>__</code>
        </td>
        <td>
            <code>'the'</code>
        </td>
        <td>
            <code>__</code>
        </td>
        <td>
            <code>object => Word</code>
        </td>
    </tr>
    <tr>
        <td>
            <strong>Input</strong>
        </td>
        <td>
            "Save"
        </td>
        <td>
            " "
        </td>
        <td>
            "the"
        </td>
        <td>
            " "
        </td>
        <td>
            "planet"
        </td>
    </tr>
    <tr>
        <td>
            <strong>$0 contains</strong>
        </td>
        <td>
            "Save"
        </td>
        <td>
            "Save "
        </td>
        <td>
            "Save the"
        </td>
        <td>
            "Save the "
        </td>
        <td>
            "Save the planet"
        </td>
    </tr>
</table>
<p>As you can see, <code>$0</code> always contains the input matched so far from the start of the capture.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../basics/items.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../basics/blocks.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../basics/items.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../basics/blocks.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script type="text/javascript">
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>

        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->


    </body>
</html>
